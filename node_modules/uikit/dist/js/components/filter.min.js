/*! UIkit 3.15.3 | https://www.getuikit.com | (c) 2014 - 2022 YOOtheme | MIT License */(function(n,m){typeof exports=="object"&&typeof module<"u"?module.exports=m(require("uikit-util")):typeof define=="function"&&define.amd?define("uikitfilter",["uikit-util"],m):(n=typeof globalThis<"u"?globalThis:n||self,n.UIkitFilter=m(n.UIkit.util))})(this,function(n){"use strict";function m(s){return A(s,"top","bottom")}function A(s,e,o){const t=[[]];for(const a of s){if(!n.isVisible(a))continue;let c=l(a);for(let r=t.length-1;r>=0;r--){const f=t[r];if(!f[0]){f.push(a);break}let d;if(f[0].offsetParent===a.offsetParent?d=l(f[0]):(c=l(a,!0),d=l(f[0],!0)),c[e]>=d[o]-1&&c[e]!==d[e]){t.push([a]);break}if(c[o]-1>d[e]||c[e]===d[e]){f.push(a);break}if(r===0){t.unshift([a]);break}}}return t}function l(s,e){e===void 0&&(e=!1);let{offsetTop:o,offsetLeft:t,offsetHeight:a,offsetWidth:c}=s;return e&&([o,t]=n.offsetPosition(s)),{top:o,left:t,bottom:o+a,right:t+c}}const y="uk-transition-leave",g="uk-transition-enter";function v(s,e,o,t){t===void 0&&(t=0);const a=u(e,!0),c={opacity:1},r={opacity:0},f=i=>()=>a===u(e)?i():Promise.reject(),d=f(async()=>{n.addClass(e,y),await Promise.all(I(e).map((i,h)=>new Promise(w=>setTimeout(()=>n.Transition.start(i,r,o/2,"ease").then(w),h*t)))),n.removeClass(e,y)}),p=f(async()=>{const i=n.height(e);n.addClass(e,g),s(),n.css(n.children(e),{opacity:0}),await L();const h=n.children(e),w=n.height(e);n.css(e,"alignContent","flex-start"),n.height(e,i);const x=I(e);n.css(h,r);const q=x.map(async(R,G)=>{await z(G*t),await n.Transition.start(R,c,o/2,"ease")});i!==w&&q.push(n.Transition.start(e,{height:w},o/2+x.length*t,"ease")),await Promise.all(q).then(()=>{n.removeClass(e,g),a===u(e)&&(n.css(e,{height:"",alignContent:""}),n.css(h,{opacity:""}),delete e.dataset.transition)})});return n.hasClass(e,y)?T(e).then(p):n.hasClass(e,g)?T(e).then(d).then(p):d().then(p)}function u(s,e){return e&&(s.dataset.transition=1+u(s)),n.toNumber(s.dataset.transition)||0}function T(s){return Promise.all(n.children(s).filter(n.Transition.inProgress).map(e=>new Promise(o=>n.once(e,"transitionend transitioncanceled",o))))}function I(s){return m(n.children(s)).reduce((e,o)=>e.concat(n.sortBy(o.filter(t=>n.isInView(t)),"offsetLeft")),[])}function L(){return new Promise(s=>requestAnimationFrame(s))}function z(s){return new Promise(e=>setTimeout(e,s))}async function B(s,e,o){await P();let t=n.children(e);const a=t.map(i=>F(i,!0)),c=n.css(e,["height","padding"]);n.Transition.cancel(e),t.forEach(n.Transition.cancel),$(e),s(),t=t.concat(n.children(e).filter(i=>!n.includes(t,i))),await Promise.resolve(),n.fastdom.flush();const r=n.css(e,["height","padding"]),[f,d]=V(e,t,a);t.forEach((i,h)=>d[h]&&n.css(i,d[h])),n.css(e,{display:"block",...c}),await P();const p=t.map((i,h)=>n.parent(i)===e&&n.Transition.start(i,f[h],o,"ease")).concat(n.Transition.start(e,r,o,"ease"));await Promise.all(p).then(()=>{t.forEach((i,h)=>n.parent(i)===e&&n.css(i,"display",f[h].opacity===0?"none":"")),$(e)},n.noop)}function F(s,e){const o=n.css(s,"zIndex");return n.isVisible(s)?{display:"",opacity:e?n.css(s,"opacity"):"0",pointerEvents:"none",position:"absolute",zIndex:o==="auto"?n.index(s):o,...b(s)}:!1}function V(s,e,o){const t=e.map((c,r)=>n.parent(c)&&r in o?o[r]?n.isVisible(c)?b(c):{opacity:0}:{opacity:n.isVisible(c)?1:0}:!1),a=t.map((c,r)=>{const f=n.parent(e[r])===s&&(o[r]||F(e[r]));if(!f)return!1;if(!c)delete f.opacity;else if(!("opacity"in c)){const{opacity:d}=f;d%1?c.opacity=1:delete f.opacity}return f});return[t,a]}function $(s){n.css(s.children,{height:"",left:"",opacity:"",pointerEvents:"",position:"",top:"",marginTop:"",marginLeft:"",transform:"",width:"",zIndex:""}),n.css(s,{height:"",display:"",padding:""})}function b(s){const{height:e,width:o}=n.offset(s),{top:t,left:a}=n.position(s),{marginLeft:c,marginTop:r}=n.css(s,["marginTop","marginLeft"]);return{top:t,left:a,height:e,width:o,marginLeft:c,marginTop:r,transform:""}}function P(){return new Promise(s=>requestAnimationFrame(s))}var N={props:{duration:Number,animation:Boolean},data:{duration:150,animation:"slide"},methods:{animate(s,e){e===void 0&&(e=this.$el);const o=this.animation;return(o==="fade"?v:o==="delayed-fade"?function(){for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return v(...c,40)}:o?B:()=>(s(),Promise.resolve()))(s,e,this.duration).then(()=>this.$update(e,"resize"),n.noop)}}},S={mixins:[N],args:"target",props:{target:Boolean,selActive:Boolean},data:{target:null,selActive:!1,attrItem:"uk-filter-control",cls:"uk-active",duration:250},computed:{toggles:{get(s,e){let{attrItem:o}=s;return n.$$("["+o+"],[data-"+o+"]",e)},watch(){if(this.$emit(),this.selActive!==!1){const s=n.$$(this.selActive,this.$el);this.toggles.forEach(e=>n.toggleClass(e,this.cls,n.includes(s,e)))}},immediate:!0},children:{get(s,e){let{target:o}=s;return n.$$(o+" > *",e)},watch(s,e){e&&!D(s,e)&&this.$emit()},immediate:!0}},update:{write(){this.setState(this.getState(),!1)}},events:[{name:"click",delegate(){return"["+this.attrItem+"],[data-"+this.attrItem+"]"},handler(s){s.preventDefault(),this.apply(s.current)}}],methods:{apply(s){const e=this.getState(),o=E(s,this.attrItem,this.getState());O(e,o)||this.setState(o)},getState(){return this.toggles.filter(s=>n.hasClass(s,this.cls)).reduce((s,e)=>E(e,this.attrItem,s),{filter:{"":""},sort:[]})},async setState(s,e){e===void 0&&(e=!0),s={filter:{"":""},sort:[],...s},n.trigger(this.$el,"beforeFilter",[this,s]);for(const o of this.toggles)n.toggleClass(o,this.cls,!!j(o,this.attrItem,s));await Promise.all(n.$$(this.target,this.$el).map(o=>{const t=()=>H(s,o,n.children(o));return e?this.animate(t,o):t()})),n.trigger(this.$el,"afterFilter",[this])}}};function C(s,e){return n.parseOptions(n.data(s,e),["filter"])}function O(s,e){return["filter","sort"].every(o=>n.isEqual(s[o],e[o]))}function H(s,e,o){const t=W(s);o.forEach(r=>n.css(r,"display",t&&!n.matches(r,t)?"none":""));const[a,c]=s.sort;if(a){const r=M(o,a,c);n.isEqual(r,o)||n.append(e,r)}}function E(s,e,o){const t=C(s,e),{filter:a,group:c,sort:r,order:f="asc"}=t;return(a||n.isUndefined(r))&&(c?a?(delete o.filter[""],o.filter[c]=a):(delete o.filter[c],(n.isEmpty(o.filter)||""in o.filter)&&(o.filter={"":a||""})):o.filter={"":a||""}),n.isUndefined(r)||(o.sort=[r,f]),o}function j(s,e,o){let{filter:t={"":""},sort:[a,c]}=o;const{filter:r="",group:f="",sort:d,order:p="asc"}=C(s,e);return n.isUndefined(d)?f in t&&r===t[f]||!r&&f&&!(f in t)&&!t[""]:a===d&&c===p}function D(s,e){return s.length===e.length&&s.every(o=>e.includes(o))}function W(s){let{filter:e}=s,o="";return n.each(e,t=>o+=t||""),o}function M(s,e,o){return[...s].sort((t,a)=>n.data(t,e).localeCompare(n.data(a,e),void 0,{numeric:!0})*(o==="asc"||-1))}return typeof window<"u"&&window.UIkit&&window.UIkit.component("filter",S),S});
